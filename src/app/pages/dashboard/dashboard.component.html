<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>Banking Dashboard</h1>
        <p class="subtitle">Manage your account and transactions</p>
    </div>

    <!-- Statistics card -->
     <div class="dashboard-grid" role="region" aria-label="Account balance summary">
        <div class="stat-card" role="article" aria-label="Total balance across all accounts">
            <h3>Total Balance</h3>
            <div class="value" aria-label="Total balance amount">
                {{ totalBalance | customCurrency}}
            </div>
            <p class="stat-label">Accross all accounts</p>
        </div>

        <div class="stat-card chequing" role="article" aria-label="Chequing accounts balance">
            <h3>Chequing Accounts</h3>
            <div class="value" aria-label="Chequing balance amount">{{ chequingBalance | customCurrency}}</div>
            <p class="stat-label">Active balance</p>
        </div>

        <div class="stat-card savings" role="article" aria-label="Savings accounts balance">
            <h3>Savings Accounts</h3>
            <div class="value" aria-label="Savings balance amount">{{ savingsBalance | customCurrency }}</div>
            <p class="stat-label">Total savings</p>
        </div>
     </div>

    <!-- Quick Actions -->
    <div class="card">
        <h2>Quick Actions</h2>
        <nav class="action-buttons" aria-label="Quick actions navigation">
            <app-custom-button
                label="Create New Account"
                buttonstyle="primary"
                (btnClick)="navigateToCreateAccount()">
            </app-custom-button>

            <app-custom-button
                label="Transfer Funds"
                buttonStyle="secondary"
                (btnClick)="navigateToTransfer()">
            </app-custom-button>

            <app-custom-button
                label="View All Transactions"
                buttonStyle="secondary"
                (btnClick)="navigateToHistory()">
            </app-custom-button>
        </nav>
    </div>

    <!-- All Accounts -->
    <div class="card">
        <h2>All Accounts</h2>
        <div class="table-container" *ngIf="(accounts$ | async) as accounts">
            <table *ngIf="accounts.length > 0; else noAccounts" role="table" aria-label="List of all accounts">
                <thead>
                    <tr>
                        <th>Account Number</th>
                        <th>Account Holder</th>
                        <th>Type</th>
                        <th>Balance</th>
                        <th>Created Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let account of accounts">
                        <td>{{ account.accountNumber }}</td>
                        <td>{{ account.accountHolderName }}</td>
                        <td>
                            <span class="account-type-badge"
                                  [class.chequing]="account.accountType === 'CHEQUING'"
                                  [class.savings]="account.accountType === 'SAVINGS'"
                                  [attr.aria-label]="account.accountType | accountType">
                                {{ account.accountType | accountType }}
                            </span>
                        </td>
                        <td class="balance" [attr.aria-label]="'Balance: ' + (account.balance | customCurrency)">{{ account.balance | customCurrency }}</td>
                        <td>{{ account.createdDate | date: 'MMM d, y' }}</td>
                    </tr>
                </tbody>
            </table>

            <ng-template #noAccounts>
                <div class="empty-state" role="status" aria-live="polite">
                    <p>No accounts found. Create your first account to get started!</p>
                    <app-custom-button
                        label="Create Account"
                        buttonStyle="primary"
                        (btnClick)="navigateToCreateAccount()">
                    </app-custom-button>
                </div>
            </ng-template>
        </div>
    </div>

    <!-- Recent Transactions -->
     <div class="card">
        <h2>Recent Transaction</h2>
        <div class="table-container" *ngIf="recentTransactions.length > 0; else noTransactions">
            <table role="table" aria-label="Recent transactions list">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Amount</th>
                        <th>Description</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let transaction of recentTransactions">
                        <td>{{ transaction.transactionDate | date: 'short' }}</td>
                        <td>{{ getAccountName(transaction.fromAccountId) }}</td>
                        <td>{{ getAccountName(transaction.toAccountId) }}</td>
                        <td class="amount" [attr.aria-label]="'Amount: ' + (transaction.amount | customCurrency)">{{ transaction.amount | customCurrency}}</td>
                        <td>{{ transaction.description }}</td>
                        <td>
                            <span class="status-badge status-success" [attr.aria-label]="'Status: ' + transaction.status">
                                {{ transaction.status }}
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <ng-template #noTransactions>
            <div class="empty-state" role="status" aria-live="polite">
                <p>No Recent transactions</p>
            </div>
        </ng-template>
     </div>
</div>
